<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학생 출결 관리</title>
    
    <style>
        /* 기본 스타일 */
        :root {
            --primary-color: #007bff;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --success-color: #28a745;
            --gray-color: #f4f4f4;
            --border-color: #ddd;
        }

        body {
            font-family: 'Malgun Gothic', '맑은 고딕', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f9f9f9;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 30px;
        }

        /* 학생 추가 폼 */
        #add-student-form {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        #student-name-input {
            flex-grow: 1;
            padding: 12px;
            font-size: 16px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
        }

        #add-student-form button {
            padding: 12px 20px;
            font-size: 16px;
            font-weight: bold;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #add-student-form button:hover {
            background-color: #0056b3;
        }

        /* 출결 테이블 */
        #attendance-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }

        #attendance-table th,
        #attendance-table td {
            border: 1px solid var(--border-color);
            padding: 12px;
            text-align: center;
            vertical-align: middle;
        }

        #attendance-table th {
            background-color: var(--gray-color);
            font-weight: bold;
        }

        /* 상태별 시각적 피드백 */
        .status-출석 { background-color: white; }
        .status-지각 { background-color: #fff8e1; } /* 연한 노랑 */
        .status-결석 { background-color: #ffebee; } /* 연한 빨강 */
        .status-조퇴 { background-color: #e3f2fd; } /* 연한 파랑 */

        /* 드롭다운 및 버튼 */
        .status-select {
            padding: 8px;
            font-size: 15px;
            border-radius: 5px;
            border: 1px solid #ccc;
            min-width: 80px;
        }

        .delete-btn {
            padding: 6px 10px;
            font-size: 14px;
            background-color: var(--danger-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .delete-btn:hover {
            background-color: #b71c1c;
        }

        /* 인쇄 버튼 */
        #print-button {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 18px;
            font-weight: bold;
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #print-button:hover {
            background-color: #1e7e34;
        }

        /* 인쇄 시 스타일 (불필요한 요소 숨기기) */
        @media print {
            body {
                padding: 0;
                margin: 0;
            }
            .container {
                box-shadow: none;
                margin: 0;
                padding: 0;
                max-width: 100%;
            }
            #add-student-form, .delete-btn, #print-button, #attendance-table th:last-child {
                display: none; /* 인쇄 시 숨김 */
            }
            #attendance-table td:last-child {
                display: none; /* 인쇄 시 숨김 */
            }
            /* 인쇄 시 드롭다운을 텍스트로 보이게 함 */
            .status-select {
                border: none;
                background: none;
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
                padding: 0;
                font-size: 16px;
                color: #000;
            }
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>🎓 학생 출결 관리</h1>

        <form id="add-student-form">
            <input type="text" id="student-name-input" placeholder="학생 이름을 입력하세요 (예: 홍길동)" required>
            <button type="submit">학생 추가</button>
        </form>

        <table id="attendance-table">
            <thead>
                <tr>
                    <th>이름</th>
                    <th>출결 상태</th>
                    <th>관리</th>
                </tr>
            </thead>
            <tbody id="attendance-tbody">
                </tbody>
        </table>

        <button id="print-button" onclick="printAttendance()">
            🖨️ 출결 현황 인쇄하기 (PDF 저장)
        </button>
    </div>

    <script>
        // 학생 목록을 저장할 배열 (애플리케이션의 상태)
        let students = [];

        // DOM 요소 가져오기
        const addStudentForm = document.getElementById('add-student-form');
        const studentNameInput = document.getElementById('student-name-input');
        const attendanceTbody = document.getElementById('attendance-tbody');

        // [이벤트] 학생 추가 폼 제출 시
        addStudentForm.addEventListener('submit', function(event) {
            event.preventDefault(); // 폼 제출(새로고침) 방지
            const studentName = studentNameInput.value.trim();

            if (studentName) {
                addStudent(studentName);
                studentNameInput.value = ''; // 입력창 비우기
                studentNameInput.focus();
            }
        });

        /**
         * 학생을 데이터에 추가하고 테이블을 다시 그립니다.
         * @param {string} name - 추가할 학생 이름
         */
        function addStudent(name) {
            const newStudent = {
                name: name,
                status: '출석' // 기본값은 '출석'
            };
            students.push(newStudent);
            renderTable(); // 테이블 새로고침
        }

        /**
         * 학생 상태를 업데이트하고 테이블을 다시 그립니다.
         * @param {number} index - 수정할 학생의 인덱스
         * @param {string} newStatus - 새로운 출결 상태
         */
        function updateStatus(index, newStatus) {
            students[index].status = newStatus;
            renderTable(); // 상태 변경 시 시각적 피드백(배경색)을 위해 테이블 전체를 다시 그림
        }

        /**
         * 학생을 삭제하고 테이블을 다시 그립니다.
         * @param {number} index - 삭제할 학생의 인덱스
         */
        function deleteStudent(index) {
            // 확인창을 띄워 사용자 실수를 방지합니다.
            if (confirm(`'${students[index].name}' 학생을 목록에서 삭제하시겠습니까?`)) {
                students.splice(index, 1); // 배열에서 학생 제거
                renderTable(); // 테이블 새로고침
            }
        }

        /**
         * 현재 'students' 배열을 기반으로 테이블(tbody)을 다시 그립니다.
         */
        function renderTable() {
            // 테이블 내용(tbody) 비우기
            attendanceTbody.innerHTML = '';

            students.forEach((student, index) => {
                // 1. 새 행(tr) 생성
                const tr = document.createElement('tr');
                
                // 2. 행에 현재 상태에 맞는 클래스 추가 (CSS 스타일링용)
                tr.className = 'status-' + student.status; // 예: 'status-출석'

                // 3. 이름(td) 생성
                const nameTd = document.createElement('td');
                nameTd.textContent = student.name;
                tr.appendChild(nameTd);

                // 4. 상태 선택 드롭다운(td) 생성
                const statusTd = document.createElement('td');
                const statusSelect = document.createElement('select');
                statusSelect.className = 'status-select';
                
                const statuses = ['출석', '지각', '결석', '조퇴'];
                statuses.forEach(status => {
                    const option = document.createElement('option');
                    option.value = status;
                    option.textContent = status;
                    if (student.status === status) {
                        option.selected = true; // 현재 학생의 상태를 기본값으로 선택
                    }
                    statusSelect.appendChild(option);
                });

                // 드롭다운 변경 시 updateStatus 함수 호출
                statusSelect.onchange = () => updateStatus(index, statusSelect.value);
                
                statusTd.appendChild(statusSelect);
                tr.appendChild(statusTd);

                // 5. 관리(삭제) 버튼(td) 생성
                const actionTd = document.createElement('td');
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = '삭제';
                deleteBtn.className = 'delete-btn';
                
                // 삭제 버튼 클릭 시 deleteStudent 함수 호출
                deleteBtn.onclick = () => deleteStudent(index);
                
                actionTd.appendChild(deleteBtn);
                tr.appendChild(actionTd);

                // 6. 완성된 행(tr)을 tbody에 추가
                attendanceTbody.appendChild(tr);
            });
        }

        /**
         * 인쇄 기능을 호출합니다.
         */
        function printAttendance() {
            window.print();
        }

        // --- 초기 실행 ---
        // 페이지 로드 시 빈 테이블을 한 번 그려줍니다.
        renderTable();

    </script>

</body>
</html>
